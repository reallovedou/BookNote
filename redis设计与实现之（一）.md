各位朋友大家好：
    先自我介绍一下啊，笔名:无名秀才，为什么叫无名秀才呢？
    第一、本人和万千码农一样像“无名”小卒一样，在公司里干着搬砖的活儿。
    第二、本人比较瘦弱，不知道是不是和长期熬夜写代码，加班有关。手不能提，肩不能抗的。古时候称这种读书人为“穷秀才”。
    第三、没有什么才华，首尾相连“无才”。 大家也可以称呼我为晓磊哥，同事也这么称呼(这样不显得老)。  
    今天我们来聊聊《Redis设计与实现》这本书。提到Redis相信很多码农都很熟悉。Redis是一个key-value存储系统和Memcache类似，它支持存储的value类型相对更多，包括string、list、set、zset和hash 以及订阅/发布等功能。但这本书并不是介绍怎么使用Redis的，而是对Redis的实现原理进行了介绍。力图展示其核心数据结构以及关键的算法思想，并让我们能够快速、有效的了解Redis的内部构造以及其运作机制。敲黑板划重点了，**如果只是对Redis实现原理感兴趣，但是又不想深入研究Redis源代码那么读这本书就够了。**（这是书上说的，不是我说的啊。我觉得时间充裕的还是可以看完对应章节，看下对应部分代码，毕竟Redis源码并不算多。）
      好，废话不多说，直奔主题。
      第一章是对整本书的一个整理。没有什么太多可以说的，就过了。

## 第二章

### 简单动态字符串 SDS 

      
free
len
buf

## 如此设计的优点：

 1. 避免频繁申请内存，内存拷贝，等io操作。
 2. 如果buf由小变大，会自动判断buf大小是否足够，如果不够重新申请内存。归一化，避免内存溢出。
 3. 二进制存储，较为安全

## 内存分配策略
 1. 如果大小 <1M则直接分配1M内存。
 2. 如果大小 >1M   如5M 则多分配1M即 5+1M。

## 内存回收策略
惰性回收
    
    

    
<!--stackedit_data:
eyJoaXN0b3J5IjpbNjM2MTcwNzg2XX0=
-->